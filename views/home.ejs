<%- include('./includes/head.ejs') %>
<link rel="stylesheet" href="/css/forms.css">
<link rel="stylesheet" href="/css/product.css">
</head>

<body>
    <%- include('includes/navigation.ejs') %>

<main>
    <h1>Username : <%= username %></h1>
    
    <br><br><br>
    <form class="product-form" action="/friend" method="POST">
        <div class="form-control">
            <label for="Search User">Username</label>
        </div>
        <input list="users" name="search_username">
        <datalist id="users">
            <% for(var i=0; i<users_list.length; i++) {%>
                <option value= <%= users_list[i]._fields[0].properties.username %>  text="helloooo">
                    <%= users_list[i]._fields[0].properties.name %>
                </option>
            <% } %>
        </datalist>
        <input type="hidden" value="Username" name="action">
     
        <button class="btn" type="submit">Search</button>
    </form>

    <br><br>

    <% if(error=='1'){ %><h3>Username is invalid. Try Again!</h3> <% };%>    

    <% if(is_following){ %>
        Username : <%= friend_data._fields[0].properties.username %><br>
        Name : <%= friend_data._fields[0].properties.name %><br>
        Age : <%= friend_data._fields[0].properties.age %><br>
        Gender : <%= friend_data._fields[0].properties.gender %><br>

    <% };%>

    <% if(is_following=='false'){ %>
        <form class="product-form" action="/follow" method="POST">
            <input type="hidden" value="follow" name="f_action">
            <button class="btn" type="submit">Follow</button>
        </form>
    <% };%>
    <% if(is_following=='true'){ %>
        <form class="product-form" action="/follow  " method="POST">
            <input type="hidden" value="unfollow" name="f_action">
            <button class="btn" type="submit">Unfollow</button>
        </form>
    <% };%>


    <h2>Following</h2>
    <ol>
    <% for(var i=0; i<following_list.length; i++) {%>
        <li>
            <b><%= following_list[i]._fields[0].properties.username %></b><br>
            Name : <%= following_list[i]._fields[0].properties.name %><br>
        </li>
    <% } %>
    </ol>

    <h2>Followers</h2>
    <ol>
    <% for(var i=0; i<followers_list.length; i++) {%>
        <li>
            <b><%= followers_list[i]._fields[0].properties.username %></b><br>
            Name : <%= followers_list[i]._fields[0].properties.name %><br>
        </li>
    <% } %>
    </ol>


    <h2>Liked Movies:</h2>
    <ol>
    <% for(var i=0; i<liked_movies.length; i++) {%>
        <li>
            <b>Title : <%= liked_movies[0]._fields[0].properties.title %></b><br>
            <b>MovieId : </b><%= liked_movies[0]._fields[0].properties.movieid %><br>
            <b>Year : </b><%= liked_movies[0]._fields[0].properties.year %><br>
            <b>Description : </b><%= liked_movies[0]._fields[0].properties.description %><br>
            <b>Country : </b><%= liked_movies[0]._fields[0].properties.country %><br><br>
        </li>
    <% } %>
    </ol>

    <h2>Disliked Movies:</h2>
    <ol>
    <% for(var i=0; i<disliked_movies.length; i++) {%>
        <li>
            <b>Title : <%= disliked_movies[0]._fields[0].properties.title %></b><br>
            <b>MovieId : </b><%= disliked_movies[0]._fields[0].properties.movieid %><br>
            <b>Year : </b><%= disliked_movies[0]._fields[0].properties.year %><br>
            <b>Description : </b><%= disliked_movies[0]._fields[0].properties.description %><br>
            <b>Country : </b><%= disliked_movies[0]._fields[0].properties.country %><br><br>
        </li>
    <% } %>
    </ol>



    </form>




</main>
